-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;



CREATE TABLE IF NOT EXISTS pais
(
    cod character varying(5) NOT NULL,
    nome character varying(50) NOT NULL,
    continente character varying(20),
    PRIMARY KEY (cod)
);

CREATE TABLE IF NOT EXISTS pais_energia
(
    id_energia integer NOT NULL,
    cod_pais character varying(5) NOT NULL,
    quantidade double precision,
    unidade character varying(10),
    ano integer
);

CREATE TABLE IF NOT EXISTS energia
(
    id integer NOT NULL,
    categoria character varying(50),
    subcategoria character varying(50),
    variavel character varying(50),
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS grupo
(
    id integer NOT NULL,
    sigla character varying(40) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS pais_grupo
(
    sigla_pais character varying(5) NOT NULL,
    id_grupo integer NOT NULL,
    PRIMARY KEY (sigla_pais, id_grupo)
);

ALTER TABLE IF EXISTS pais_energia
    ADD FOREIGN KEY (id_energia)
    REFERENCES energia (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS pais_energia
    ADD FOREIGN KEY (sigla_area)
    REFERENCES pais (cod) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS pais_grupo
    ADD FOREIGN KEY (sigla_pais)
    REFERENCES pais (cod) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS pais_grupo
    ADD FOREIGN KEY (id_grupo)
    REFERENCES grupo (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;